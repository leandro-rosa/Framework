<?xml version="1.0"?>
<!--
/**
 * OneJobCode
 *
 * NOTICE OF LICENSE
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to https://www.onejobcode.com for more information.
 *
 * @category OneJobCode
 *
 * @copyright Copyright (c) 2021 One Job Code (https://www.onejobcode.com)
 *
 * @author One Job Code <engineer@onejobcode.com>
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="OneJobCode\Framework\Api\CommandPoolInterface" type="OneJobCode\Framework\Command\CommandPool" />

    <preference for="OneJobCode\Framework\Api\ClientInterface"
                type="OneJobCode\Framework\Service\Client\SoapClient" />

    <preference for="OneJobCode\Framework\Api\GenericCommandInterface"
                type="OneJobCode\Framework\Command\CommandFallBack" />

    <virtualType name="Generic\Save" type="OneJobCode\Framework\Model\ResourceModel\Entity\GenericSave">
        <arguments>
            <argument name="resource" xsi:type="object">ResourceModel</argument>
        </arguments>
    </virtualType>

    <virtualType name="Generic\Delete" type="OneJobCode\Framework\Model\ResourceModel\Entity\GenericDelete">
        <arguments>
            <argument name="resource" xsi:type="object">ResourceModel</argument>
        </arguments>
    </virtualType>

    <virtualType name="Generic\CommandPool" type="OneJobCode\Framework\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="get" xsi:type="string">Generic\Get</item>
                <item name="save" xsi:type="string">Generic\Save</item>
                <item name="delete" xsi:type="string">Generic\Delete</item>
                <item name="getList" xsi:type="string">Generic\GetList</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="OneJobCode\Framework\Model\GenericRepository">
        <arguments>
            <argument name="commandPool" xsi:type="object">Generic\CommandPool</argument>
        </arguments>
    </type>
    <!-- END CONFIGURE REPOSITORY -->

</config>
